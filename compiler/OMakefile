OCAMLINCLUDES[] += $(BASE)/runtime
OCAML_LIBS[] =
	$(BASE)/runtime/extprot

OCAMLFLAGS += -syntax camlp4o
OCAMLDEPFLAGS += -syntax camlp4o

OCAMLPACKS[] += camlp4.quotations

EXTPROT_OBJS[] =
	parser
	ptypes
	gencode
	gen_OCaml

section
	OCAMLPACKS[] += camlp4.extend
	OCAMLFLAGS += -w e
	CamlSources(parser)

OCAMLPACKS += camlp4.lib
OCamlProgram(extprotc, $(EXTPROT_OBJS) extprotc)

.DEFAULT: extprotc$(EXE)

.PHONY: clean
clean:
	rm -f $(filter-proper-targets $(ls R, .)) *.s *.annot
